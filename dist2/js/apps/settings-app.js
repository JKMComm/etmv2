"use strict";$(document).ready(function(){function e(){$.ajax({dataType:"json",url:r,success:function(e){$("#ch-email-current").val(e.email.email)}})}function a(){var e=t+"Settings/reports/";$.ajax({dataType:"json",url:e,success:function(e){var a=e.data.reports;$(".report-options").val(a)}})}var t=$(".navbar").data("url"),r=t+"Settings/email/";e(),a(),$(".btn-change-reports").on("click",function(e){e.preventDefault();var r=$(".change-reports").serialize(),n=t+"Settings/changeReports/";$.ajax({dataType:"json",url:n,type:"POST",data:r,success:function(e){toastr[e.notice](e.message),"success"==e.notice&&a()}})}),$(".btn-change-email").on("click",function(a){a.preventDefault();var r=$("#ch-email-new").val(),n=$("#ch-email-pw").val();if(isEmail(r))if(n.length>=6){var s="Settings/changeEmail",c=$(".change-email").serialize();$.ajax({dataType:"json",type:"POST",data:c,url:t+s,success:function(a){toastr[a.notice](a.message),e(),$("#ch-email-new").val(""),$("#ch-email-pw").val()}})}else toastr.error(errHandle.get().PASSWORD_TOO_SHORT);else toastr.error(errHandle.get().INVALID_EMAIL)}),$(".btn-change-pw").on("click",function(e){e.preventDefault();var a=$("#ch-pw-new1").val(),r=$("#ch-pw-new2").val(),n=$(".change-password").serialize();if(a===r)if(a.length>=6){var s="Settings/changePassword";$.ajax({dataType:"json",type:"POST",data:n,url:t+s,success:function(e){toastr[e.notice](e.message),$("#ch-pw-new1").val(""),$("#ch-pw-new2").val(""),$("#ch-pw-old").val("")}})}else toastr.error(errHandle.get().PASSWORD_TOO_SHORT,"Error");else toastr.error(errHandle.get().PASSWORDS_MISMATCH,"Error")})});