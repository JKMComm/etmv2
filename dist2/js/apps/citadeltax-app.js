"use strict";$(document).ready(function(){function t(){var t=a+"CitadelTax/getTaxList/"+r;$.ajax({dataType:"json",url:t,success:function(t){if($(".tax-entries tr").remove(),0==t.length){var e="<tr><td colspan='3' class='text-center'>No tax rules present. Create one at the left</td></tr>";$(".tax-entries").append(e)}else $.each(t,function(e,n){var s=t[e].idcitadel_tax,d=t[e].name,i=t[e].value,c="<a  data-id="+s+" href="+a+"CitadelTax/removeTax/"+r+"/"+s+"><button class='btn btn-danger btn-remove-tax'>Remove</button></a>",l="<tr><td>"+d+"</td><td>"+i+"</td><td>"+c+"</td></tr>";$(".table tbody").append(l)})}})}var a=$(".navbar").data("url"),e=a+"CitadelTax/searchCitadels/",n=a+"CitadelTax/addTax/",r=$(".characterid").val();t(),$("#citadel").autocomplete({source:e,minLength:2,messages:{noResults:""},select:function(t,a){$("#citadel").val(a.item.value)}}),$(".submit-tax").on("click",function(a){a.preventDefault();var e=$("#tax").val(),r=/^(0(\.\d+)?|1(\.0+)?)$/;if(r.test(e)){var s=$(".add-tax").serialize();$.ajax({dataType:"json",url:n,data:s,type:"POST",success:function(a){toastr[a.notice](a.message),t()}})}else toastr.error(errHandle.get().INVALID_FORM)}),$(".tax-list").on("click","a",function(e){e.preventDefault();var n=$(".characterid").val(),r=$(this).data("id"),s=a+"CitadelTax/removeTax/"+n+"/"+r;$.ajax({dataType:"json",url:s,success:function(a){toastr[a.notice](a.message),t()}})})});