"use strict";$(document).ready(function(){function t(){var t=e+"TradeRoutes/listTradeRoutes/"+n;$.ajax({dataType:"json",url:t,success:function(t){if($("table tbody tr").empty(),0==t.length){var e="<tr><td colspan='3' class='text-center'>No trade routes present. Create one at the left</td></tr>";$("table").prepend(e)}else $.each(t,function(e,a){var n=t[e].id,s="<tr><td>"+t[e].s1+"</td><td>"+t[e].s2+"</td><td><button class='btn btn-danger btn-delete' data-iddel="+n+">Delete</button></tr></tr>";$("table").prepend(s)})}})}$(".origin-station").focus().select();var e=$(".navbar").data("url"),a=e+"TradeRoutes/searchStations",n=$(".navbar").data("id");t(),$(".origin-station, .destination-station").autocomplete({source:a,minLength:2,messages:{noResults:""},select:function(t,e){$(this).hasClass("origin-station")?$(".origin").val(e.item.value):$(".destination").val(e.item.value)}}),$(".submit-traderoute").on("click",function(s){s.preventDefault();var o=$(".origin-station").val(),i=$(".destination-station").val();$(".origin").val(o),$(".destination").val(i),a=e+"TradeRoutes/submitRoute/"+n;var r=$(".form-horizontal").serialize();$.ajax({dataType:"json",url:a,data:r,type:"POST",success:function(e){toastr[e.notice](e.message),$(".origin-station, .destination-station").val(""),t()}})}),$("table").on("click","button",function(){var a=$(this),n=e+"TradeRoutes/deleteRoute/"+$(this).data("iddel");$.ajax({dataType:"json",url:n,success:function(e){a.closest("tr").remove(),toastr[e.notice](e.message),t()}})})});