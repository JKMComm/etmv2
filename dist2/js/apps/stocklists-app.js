"use strict";$(document).ready(function(){function t(){var t=s+"StockLists/populateList/";$.ajax({dataType:"json",url:t,success:function(t){$(".dropdown-list option.value").remove(),$.each(t,function(e,s){var a=t[e].iditemlist,i=t[e].name,n="<option class='value'id="+a+">"+i+"</option>";$(".dropdown-list").append(n)})}})}function e(t){var e=s+"StockLists/getItems/"+t;$(".table-items").attr("data-id",t),$.ajax({dataType:"json",url:e,success:function(e){$(".table-items tr").remove(),$.each(e,function(a,i){var n=e[a].id,o="https://image.eveonline.com/Type/"+n+"_32.png",c="<img src='"+o+"' alt='item'>",l=e[a].name,d=number_format(e[a].vol,2,".",","),r=number_format(e[a].price,2,".",","),m="<a href="+s+"StockLists/removeItem/"+n+"/"+t+"><button class='btn btn-danger btn-remove-item'>Remove</button></a>",u="<tr><td> "+c+" "+l+"</td><td>"+d+"</td><td>"+r+"</td><td>"+m+"</td><tr>";$(".table tbody").append(u)})}})}var s=$(".navbar").data("url"),a=s+"StockLists/searchItems/";t(),$(".submit-list").on("click",function(a){a.preventDefault();var i=s+"StockLists/newList/",n=$(".form-horizontal").serialize();$.ajax({dataType:"json",url:i,data:n,type:"POST",success:function(s){toastr[s.notice](s.message);var a=s.id,i=$("#list-name").val();t(),$(".add-list-item").show(),$(".stocklist-content").show(),$(".yellow.contents").text(i),$("#list-id").val(a),e(a)}})}),$(".dropdown-list").change(function(t){var s=$(this).find("option:selected").text();$(".yellow.contents").text(s);var a=$(this).find("option:selected").attr("id");e(a),$(this).find("option:selected").hasClass("value")?($(".add-list-item").show(),$("#list-id").val(a),$(".stocklist-content").show()):($(".add-list-item").hide(),$(".stocklist-content").hide())}),$("#item-name").autocomplete({source:a,minLength:2,messages:{noResults:""},select:function(t,e){$("#item-name").val(e.item.value)}}),$(".btn-add-item").on("click",function(t){t.preventDefault();var a=$("#list-id").val(),i=s+"StockLists/addItem/",n=$(".add-item").serialize();$.ajax({dataType:"json",url:i,data:n,type:"POST",success:function(t){toastr[t.notice](t.message),"success"==t.notice&&e(a)}}),$("#item-name").val("")}),$(".table-items").on("click","a",function(t){t.preventDefault();var s=$(this).attr("href"),a=$(".table-items").data("id");$.ajax({dataType:"json",url:s,success:function(t){toastr[t.notice](t.message),"success"==t.notice&&e(a)}})}),$(".btn-delete-list-confirm").on("click",function(e){e.preventDefault();var a=$(".table-items").attr("data-id"),i=s+"StockLists/removeList/"+a;$.ajax({dataType:"json",url:i,success:function(e){toastr[e.notice](e.message),"success"==e.notice&&($(".modal-close").trigger("click"),$(".add-list-item").hide(),$(".stocklist-content").hide(),$(".dropdown-list").val("0"),t())}})})});